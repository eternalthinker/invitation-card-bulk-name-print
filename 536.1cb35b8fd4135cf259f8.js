(()=>{"use strict";var e,t,a={536:(e,t,a)=>{var r=a(9055);function n(e,t,a,r){const n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0);const o=r.font,i=`${o.weight} ${o.size}px "${o.family}"`;n.font=i,n.fillStyle=r.color,n.textBaseline="top",n.textAlign="center";for(let t=0;t<a.length;t++){const i=a[t];n.fillText(i,e.width/2,r.position.y+1.5*t*o.size)}}async function o(e){const t=await r.PDFDocument.create(),a=t.addPage([e.width,e.height]),n=await e.convertToBlob({type:"image/png"}),o=await n.arrayBuffer(),i=await t.embedPng(o);return a.drawImage(i,{x:0,y:0,width:i.width,height:i.height}),await t.saveAsBase64()}a(4043),a(3162);const i=a.p+"fonts/34cd748d760d618c54403a69086e4f99.otf";onmessage=async e=>{try{const{guestConfig:t}=e.data,a=t.font.base64||i,r=new FontFace(t.font.family,`url(${a})`);self.fonts.add(r),await r.load(),await async function(e){const{canvas:t,guestList:a,cardImg:r,guestConfig:i}=e;for(let e=0;e<a.length;++e){const s=a[e];if(0===s.length)return;n(t,r,`${i.prefix}${s}${i.suffix}`.toUpperCase().split(i.lineBreakCharacter),i);const c=await o(t);postMessage({type:"progress",current:e+1,guest:s,finalImg:t.transferToImageBitmap(),pdfBase64:c,filename:s.replace(/\W+/g,"_").toLowerCase()})}}(e.data),postMessage({type:"end"})}catch(e){postMessage({type:"error",error:e})}}}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return a[e].call(o.exports,o,o.exports,n),o.exports}n.m=a,n.x=()=>{var e=n.O(void 0,[841],(()=>n(536)));return n.O(e)},e=[],n.O=(t,a,r,o)=>{if(!a){var i=1/0;for(l=0;l<e.length;l++){for(var[a,r,o]=e[l],s=!0,c=0;c<a.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(l--,1);var f=r();void 0!==f&&(t=f)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[a,r,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>e+"."+{536:"1cb35b8fd4135cf259f8",841:"9f845d4e0f943240fb0a"}[e]+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="",(()=>{n.b=self.location+"";var e={536:1};n.f.i=(t,a)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkinvitation_card_bulk_name_print=self.webpackChunkinvitation_card_bulk_name_print||[],a=t.push.bind(t);t.push=t=>{var[r,o,i]=t;for(var s in o)n.o(o,s)&&(n.m[s]=o[s]);for(i&&i(n);r.length;)e[r.pop()]=1;a(t)}})(),t=n.x,n.x=()=>n.e(841).then(t),n.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM2LmZlNmVhYzdkNGU1ZjJmM2NkZTQzLmpzIiwibWFwcGluZ3MiOiJ1QkFBSUEsRUNBQUMsRSwrQkNzRkcsU0FBU0MsRUFBY0MsRUFBUUMsRUFBU0MsRUFBVUMsR0FDdkQsTUFBTUMsRUFBTUosRUFBT0ssV0FBVyxNQUM5QkQsRUFBSUUsVUFBVSxFQUFHLEVBQUdOLEVBQU9PLE1BQU9QLEVBQU9RLFFBQ3pDSixFQUFJSyxVQUFVUixFQUFTLEVBQUcsR0FDMUIsTUFBTVMsRUFBT1AsRUFBWU8sS0FDbkJDLEVBQVUsR0FBR0QsRUFBS0UsVUFBVUYsRUFBS0csV0FBV0gsRUFBS0ksVUFDdkRWLEVBQUlNLEtBQU9DLEVBQ1hQLEVBQUlXLFVBQVlaLEVBQVlhLE1BQzVCWixFQUFJYSxhQUFlLE1BQ25CYixFQUFJYyxVQUFZLFNBQ2hCLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJakIsRUFBU2tCLE9BQVFELElBQUssQ0FDdkMsTUFBTUUsRUFBVW5CLEVBQVNpQixHQUN6QmYsRUFBSWtCLFNBQ0ZELEVBQ0FyQixFQUFPTyxNQUFPLEVBQ2RKLEVBQVlvQixTQUFTQyxFQUFTLElBQUpMLEVBQVVULEVBQUtHLE9BTXhDWSxlQUFlQyxFQUFTMUIsR0FDN0IsTUFBTTJCLFFBQWUsRUFBQUMsWUFBQSxTQUNmQyxFQUFPRixFQUFPRyxRQUFRLENBQUM5QixFQUFPTyxNQUFPUCxFQUFPUSxTQUM1Q3VCLFFBQWEvQixFQUFPZ0MsY0FBYyxDQUN0Q0MsS0FBTSxjQUVGQyxRQUFrQkgsRUFBS0ksY0FDdkJsQyxRQUFnQjBCLEVBQU9TLFNBQVNGLEdBUXRDLE9BUEFMLEVBQUtwQixVQUFVUixFQUFTLENBQ3RCb0MsRUFBRyxFQUNIYixFQUFHLEVBQ0hqQixNQUFPTixFQUFRTSxNQUNmQyxPQUFRUCxFQUFRTyxlQUVNbUIsRUFBT1csZSxnQkN6SGpDLFFBQWUsSUFBMEIsNkNDR3pDQyxVQUFZZCxNQUFPZSxJQUNqQixJQUNFLE1BQU0sWUFBRXJDLEdBQWdCcUMsRUFBRUMsS0FDcEJDLEVBQVd2QyxFQUFZTyxLQUFLaUMsUUFBVSxFQUN0Q0MsRUFBVyxJQUFJQyxTQUNuQjFDLEVBQVlPLEtBQUtJLE9BQ2pCLE9BQU80QixNQUdUSSxLQUFLQyxNQUFNQyxJQUFJSixTQUVUQSxFQUFTSyxhQWdCbkJ4QixlQUE4QmdCLEdBQzVCLE1BQU0sT0FDSnpDLEVBQU0sVUFDTmtELEVBQVMsUUFDVGpELEVBQU8sWUFDUEUsR0FDRXNDLEVBQ0osSUFBSSxJQUFJdEIsRUFBSSxFQUFHQSxFQUFJK0IsRUFBVTlCLFNBQVVELEVBQUcsQ0FDeEMsTUFBTWdDLEVBQVFELEVBQVUvQixHQUN4QixHQUFxQixJQUFqQmdDLEVBQU0vQixPQUNSLE9BSUZyQixFQUFjQyxFQUFRQyxFQUZOLEdBQUdFLEVBQVlpRCxTQUFTRCxJQUFRaEQsRUFBWWtELFNBQVNDLGNBQzVDQyxNQUFNcEQsRUFBWXFELG9CQUNGckQsR0FDekMsTUFBTXNELFFBQWtCL0IsRUFBUzFCLEdBQ2pDMEQsWUFBWSxDQUNWekIsS0FBTSxXQUNOMEIsUUFBU3hDLEVBQUUsRUFDWGdDLE1BQUFBLEVBQ0FTLFNBQVU1RCxFQUFPNkQsd0JBQ2pCSixVQUFBQSxFQUNBSyxTQUFVWCxFQUFNWSxRQUFRLE9BQVEsS0FBS0MsaUJBcENqQyxDQUFleEIsRUFBRUMsTUFFdkJpQixZQUFZLENBQ1Z6QixLQUFNLFFBR1YsTUFBT2dDLEdBQ0xQLFlBQVksQ0FDVnpCLEtBQU0sUUFDTmlDLE1BQU9ELFFDeEJURSxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxJQU9WLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsUUFJZkosRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQi9CLEVBQUksS0FHdkIsSUFBSXdDLEVBQXNCVCxFQUFvQlUsT0FBRVAsRUFBVyxDQUFDLE1BQU0sSUFBT0gsRUFBb0IsT0FFN0YsT0FEc0JBLEVBQW9CVSxFQUFFRCxJTGhDekNoRixFQUFXLEdBQ2Z1RSxFQUFvQlUsRUFBSSxDQUFDQyxFQUFRQyxFQUFVQyxFQUFJQyxLQUM5QyxJQUFHRixFQUFILENBTUEsSUFBSUcsRUFBZUMsRUFBQUEsRUFDbkIsSUFBU2pFLEVBQUksRUFBR0EsRUFBSXRCLEVBQVN1QixPQUFRRCxJQUFLLENBR3pDLElBRkEsSUFBSzZELEVBQVVDLEVBQUlDLEdBQVlyRixFQUFTc0IsR0FDcENrRSxHQUFZLEVBQ1BDLEVBQUksRUFBR0EsRUFBSU4sRUFBUzVELE9BQVFrRSxNQUNwQixFQUFYSixHQUFzQkMsR0FBZ0JELElBQWFLLE9BQU9DLEtBQUtwQixFQUFvQlUsR0FBR1csT0FBT0MsR0FBU3RCLEVBQW9CVSxFQUFFWSxHQUFLVixFQUFTTSxNQUM5SU4sRUFBU1csT0FBT0wsSUFBSyxJQUVyQkQsR0FBWSxFQUNUSCxFQUFXQyxJQUFjQSxFQUFlRCxJQUc3QyxHQUFHRyxFQUFXLENBQ2J4RixFQUFTOEYsT0FBT3hFLElBQUssR0FDckIsSUFBSXlFLEVBQUlYLFNBQ0VWLElBQU5xQixJQUFpQmIsRUFBU2EsSUFHaEMsT0FBT2IsRUF2Qk5HLEVBQVdBLEdBQVksRUFDdkIsSUFBSSxJQUFJL0QsRUFBSXRCLEVBQVN1QixPQUFRRCxFQUFJLEdBQUt0QixFQUFTc0IsRUFBSSxHQUFHLEdBQUsrRCxFQUFVL0QsSUFBS3RCLEVBQVNzQixHQUFLdEIsRUFBU3NCLEVBQUksR0FDckd0QixFQUFTc0IsR0FBSyxDQUFDNkQsRUFBVUMsRUFBSUMsSU1KL0JkLEVBQW9CeUIsRUFBS3BCLElBQ3hCLElBQUlxQixFQUFTckIsR0FBVUEsRUFBT3NCLFdBQzdCLElBQU90QixFQUFpQixRQUN4QixJQUFNLEVBRVAsT0FEQUwsRUFBb0I0QixFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxHQ0xSMUIsRUFBb0I0QixFQUFJLENBQUN4QixFQUFTMEIsS0FDakMsSUFBSSxJQUFJUixLQUFPUSxFQUNYOUIsRUFBb0IrQixFQUFFRCxFQUFZUixLQUFTdEIsRUFBb0IrQixFQUFFM0IsRUFBU2tCLElBQzVFSCxPQUFPYSxlQUFlNUIsRUFBU2tCLEVBQUssQ0FBRVcsWUFBWSxFQUFNQyxJQUFLSixFQUFXUixNQ0ozRXRCLEVBQW9CbUMsRUFBSSxHQUd4Qm5DLEVBQW9CNUIsRUFBS2dFLEdBQ2pCQyxRQUFRQyxJQUFJbkIsT0FBT0MsS0FBS3BCLEVBQW9CbUMsR0FBR0ksUUFBTyxDQUFDQyxFQUFVbEIsS0FDdkV0QixFQUFvQm1DLEVBQUViLEdBQUtjLEVBQVNJLEdBQzdCQSxJQUNMLEtDTkp4QyxFQUFvQnlDLEVBQUtMLEdBRVpBLEVBQVUsSUFBTSxDQUFDLElBQU0sdUJBQXVCLElBQU0sd0JBQXdCQSxHQUFXLE1DSHBHcEMsRUFBb0IwQyxFQUFJLFdBQ3ZCLEdBQTBCLGlCQUFmQyxXQUF5QixPQUFPQSxXQUMzQyxJQUNDLE9BQU9DLE1BQVEsSUFBSUMsU0FBUyxjQUFiLEdBQ2QsTUFBT3pFLEdBQ1IsR0FBc0IsaUJBQVgwRSxPQUFxQixPQUFPQSxRQUxqQixHQ0F4QjlDLEVBQW9CK0IsRUFBSSxDQUFDZ0IsRUFBS0MsSUFBVTdCLE9BQU84QixVQUFVQyxlQUFlM0MsS0FBS3dDLEVBQUtDLEdDQWxGaEQsRUFBb0JtRCxFQUFJLEcsTUNBeEJuRCxFQUFvQm9ELEVBQUkxRSxLQUFLMkUsU0FBVyxHQUl4QyxJQUFJQyxFQUFrQixDQUNyQixJQUFLLEdBZ0JOdEQsRUFBb0JtQyxFQUFFcEYsRUFBSSxDQUFDcUYsRUFBU0ksS0FFL0JjLEVBQWdCbEIsSUFFbEJtQixjQUFjdkQsRUFBb0JtRCxFQUFJbkQsRUFBb0J5QyxFQUFFTCxLQUsvRCxJQUFJb0IsRUFBcUI5RSxLQUFrRCw0Q0FBSUEsS0FBa0QsNkNBQUssR0FDbEkrRSxFQUE2QkQsRUFBbUJFLEtBQUtDLEtBQUtILEdBQzlEQSxFQUFtQkUsS0F2QkNyRixJQUNuQixJQUFLdUMsRUFBVWdELEVBQWFDLEdBQVd4RixFQUN2QyxJQUFJLElBQUk0QixLQUFZMkQsRUFDaEI1RCxFQUFvQitCLEVBQUU2QixFQUFhM0QsS0FDckNELEVBQW9CUSxFQUFFUCxHQUFZMkQsRUFBWTNELElBSWhELElBREc0RCxHQUFTQSxFQUFRN0QsR0FDZFksRUFBUzVELFFBQ2RzRyxFQUFnQjFDLEVBQVNrRCxPQUFTLEVBQ25DTCxFQUEyQnBGLEssR1puQnhCM0MsRUFBT3NFLEVBQW9CL0IsRUFDL0IrQixFQUFvQi9CLEVBQUksSUFDaEIrQixFQUFvQjVCLEVBQUUsS0FBSzJGLEtBQUtySSxHYURkc0UsRUFBb0IvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL2ludml0YXRpb24tY2FyZC1idWxrLW5hbWUtcHJpbnQvd2VicGFjay9ydW50aW1lL3N0YXJ0dXAgY2h1bmsgZGVwZW5kZW5jaWVzIiwid2VicGFjazovL2ludml0YXRpb24tY2FyZC1idWxrLW5hbWUtcHJpbnQvLi9zcmMvYWRkX25hbWVzX3RvX2NhcmQuanMiLCJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC8uL3NyYy9mb250cy9Ob3dBbHQtTWVkaXVtLm90ZiIsIndlYnBhY2s6Ly9pbnZpdGF0aW9uLWNhcmQtYnVsay1uYW1lLXByaW50Ly4vc3JjL2dlbmVyYXRlX2NhcmRzX3dvcmtlci5qcyIsIndlYnBhY2s6Ly9pbnZpdGF0aW9uLWNhcmQtYnVsay1uYW1lLXByaW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2ludml0YXRpb24tY2FyZC1idWxrLW5hbWUtcHJpbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC93ZWJwYWNrL3J1bnRpbWUvZW5zdXJlIGNodW5rIiwid2VicGFjazovL2ludml0YXRpb24tY2FyZC1idWxrLW5hbWUtcHJpbnQvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL2ludml0YXRpb24tY2FyZC1idWxrLW5hbWUtcHJpbnQvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9pbnZpdGF0aW9uLWNhcmQtYnVsay1uYW1lLXByaW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9pbnZpdGF0aW9uLWNhcmQtYnVsay1uYW1lLXByaW50L3dlYnBhY2svcnVudGltZS9pbXBvcnRTY3JpcHRzIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vaW52aXRhdGlvbi1jYXJkLWJ1bGstbmFtZS1wcmludC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIG5leHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLng7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnggPSAoKSA9PiB7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoODQxKS50aGVuKG5leHQpO1xufTsiLCJpbXBvcnQgeyBQREZEb2N1bWVudCB9IGZyb20gJ3BkZi1saWInO1xyXG5pbXBvcnQgKiBhcyBKU1ppcCBmcm9tICdqc3ppcCc7XHJcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZE5hbWVzVG9DYXJkKGNvbmZpZywgb25GaW5pc2gpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY2FyZEltZyA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGNvbmZpZy5jYXJkSW1nKTtcclxuICAgIGNvbnN0IG9mZnNjcmVlbkNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoY2FyZEltZy53aWR0aCwgY2FyZEltZy5oZWlnaHQpO1xyXG4gICAgY29uc3QgZ3Vlc3RMaXN0ID0gY29uZmlnLmd1ZXN0TGlzdDtcclxuICAgIFxyXG4gICAgY29uc3QgcGRmQmFzZTY0TGlzdCA9IFtdO1xyXG4gICAgY29uZmlnLnJlc3VsdENvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgY29uZmlnLmFjdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihcclxuICAgICAgbmV3IFVSTCgnLi9nZW5lcmF0ZV9jYXJkc193b3JrZXIuanMnLCBpbXBvcnQubWV0YS51cmwpLFxyXG4gICAgKTtcclxuICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIGNhbnZhczogb2Zmc2NyZWVuQ2FudmFzLFxyXG4gICAgICBjYXJkSW1nLFxyXG4gICAgICBndWVzdExpc3QsXHJcbiAgICAgIGd1ZXN0Q29uZmlnOiBjb25maWcuZ3Vlc3QsXHJcbiAgICB9LCBbb2Zmc2NyZWVuQ2FudmFzXSk7XHJcblxyXG4gICAgd29ya2VyLm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoZS5kYXRhLnR5cGUpIHtcclxuICAgICAgICBjYXNlICdwcm9ncmVzcyc6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcGRmQmFzZTY0TGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgZmlsZW5hbWU6IGUuZGF0YS5maWxlbmFtZSxcclxuICAgICAgICAgICAgcGRmQmFzZTY0OiBlLmRhdGEucGRmQmFzZTY0LFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gYFByb2Nlc3NlZCAke2UuZGF0YS5jdXJyZW50fSBjYXJkcy4gTGFzdCBwcm9jZXNzZWQ6ICR7ZS5kYXRhLmd1ZXN0fWA7XHJcbiAgICAgICAgICBjb25maWcucHJvZ3Jlc3NUZXh0RWwuaW5uZXJIVE1MID0gcHJvZ3Jlc3NUZXh0O1xyXG5cclxuICAgICAgICAgIGNvbnN0IHJlc3VsdENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgY29uc3QgdyA9IDQwMDtcclxuICAgICAgICAgIGNvbnN0IGggPSB3ICogY2FyZEltZy5oZWlnaHQgLyBjYXJkSW1nLndpZHRoO1xyXG4gICAgICAgICAgcmVzdWx0Q2FudmFzLndpZHRoID0gdztcclxuICAgICAgICAgIHJlc3VsdENhbnZhcy5oZWlnaHQgPSBoO1xyXG4gICAgICAgICAgcmVzdWx0Q2FudmFzLnN0eWxlLm1hcmdpbiA9ICc1cHgnO1xyXG4gICAgICAgICAgY29uc3QgY3R4ID0gcmVzdWx0Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKGUuZGF0YS5maW5hbEltZywgMCwgMCwgdywgaCk7XHJcbiAgICAgICAgICBjb25maWcucmVzdWx0Q29udGFpbmVyRWwuYXBwZW5kQ2hpbGQocmVzdWx0Q2FudmFzKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlICdlbmQnOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbmZpZy5yZXN1bHRDYXJkcyA9IHBkZkJhc2U2NExpc3Q7XHJcbiAgICAgICAgICBvbkZpbmlzaCgpO1xyXG4gICAgICAgICAgY29uZmlnLmFjdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSAnaW5mbyc6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1c6JywgZS5kYXRhKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGhyb3cgKHsgZXJyb3I6ICdVbmtub3duIG1lc3NhZ2UgZnJvbSB3b3JrZXInLCBtZXNzYWdlOiBlLmRhdGF9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbiAgY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb3dubG9hZFppcChwZGZCYXNlNjRMaXN0KSB7XHJcbiAgY29uc3QgemlwID0gbmV3IEpTWmlwKCk7XHJcbiAgZm9yIChjb25zdCBwZGZJbmZvIG9mIHBkZkJhc2U2NExpc3QpIHtcclxuICAgIGNvbnN0IHsgZmlsZW5hbWUsIHBkZkJhc2U2NCB9ID0gcGRmSW5mbztcclxuICAgIHppcC5maWxlKGAke2ZpbGVuYW1lfS5wZGZgLCBwZGZCYXNlNjQsIHsgYmFzZTY0OiB0cnVlIH0pO1xyXG4gIH07XHJcbiAgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAnYmxvYid9KVxyXG4gICAgLnRoZW4oY29udGVudCA9PiB7XHJcbiAgICAgIHNhdmVBcyhjb250ZW50LCBcInJlc3VsdHMuemlwXCIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFVzZWQgYnkgd2ViIHdvcmtlclxyXG5leHBvcnQgZnVuY3Rpb24gYWRkTmFtZVRvQ2FyZChjYW52YXMsIGNhcmRJbWcsIG5hbWVTdHJzLCBndWVzdENvbmZpZykge1xyXG4gIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICBjdHguZHJhd0ltYWdlKGNhcmRJbWcsIDAsIDApO1xyXG4gIGNvbnN0IGZvbnQgPSBndWVzdENvbmZpZy5mb250O1xyXG4gIGNvbnN0IGZvbnRTdHIgPSBgJHtmb250LndlaWdodH0gJHtmb250LnNpemV9cHggXCIke2ZvbnQuZmFtaWx5fVwiYDtcclxuICBjdHguZm9udCA9IGZvbnRTdHI7XHJcbiAgY3R4LmZpbGxTdHlsZSA9IGd1ZXN0Q29uZmlnLmNvbG9yO1xyXG4gIGN0eC50ZXh0QmFzZWxpbmUgPSAndG9wJzsgLy8gTm90IHN1cmUgaWYgdGhpcyBpcyBuZWNlc3NhcnlcclxuICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgZm9yKGxldCBpID0gMDsgaSA8IG5hbWVTdHJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBuYW1lU3RyID0gbmFtZVN0cnNbaV07XHJcbiAgICBjdHguZmlsbFRleHQoXHJcbiAgICAgIG5hbWVTdHIsXHJcbiAgICAgIGNhbnZhcy53aWR0aC8gMixcclxuICAgICAgZ3Vlc3RDb25maWcucG9zaXRpb24ueSArIChpICogMS41ICogZm9udC5zaXplKSxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBVc2VkIGJ5IHdlYiB3b3JrZXJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltZ1RvUGRmKGNhbnZhcykge1xyXG4gIGNvbnN0IHBkZkRvYyA9IGF3YWl0IFBERkRvY3VtZW50LmNyZWF0ZSgpO1xyXG4gIGNvbnN0IHBhZ2UgPSBwZGZEb2MuYWRkUGFnZShbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XHJcbiAgY29uc3QgYmxvYiA9IGF3YWl0IGNhbnZhcy5jb252ZXJ0VG9CbG9iKHtcclxuICAgIHR5cGU6IFwiaW1hZ2UvcG5nXCIsXHJcbiAgfSk7XHJcbiAgY29uc3QgaW1nQnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpO1xyXG4gIGNvbnN0IGNhcmRJbWcgPSBhd2FpdCBwZGZEb2MuZW1iZWRQbmcoaW1nQnVmZmVyKTtcclxuICBwYWdlLmRyYXdJbWFnZShjYXJkSW1nLCB7XHJcbiAgICB4OiAwLFxyXG4gICAgeTogMCxcclxuICAgIHdpZHRoOiBjYXJkSW1nLndpZHRoLFxyXG4gICAgaGVpZ2h0OiBjYXJkSW1nLmhlaWdodCxcclxuICB9KTtcclxuICBjb25zdCBwZGZCYXNlNjQgPSBhd2FpdCBwZGZEb2Muc2F2ZUFzQmFzZTY0KCk7XHJcbiAgcmV0dXJuIHBkZkJhc2U2NDtcclxufVxyXG5cclxuLypcclxuICogTm90IHVzZWQsIGFzIGNhcmQgcHJldmlldyBpcyBzaG93biB0aHJvdWdoIGEgY2FudmFzXHJcbiAqXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dJZnJhbWUocGRmQmFzZTY0KSB7XHJcbiAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgaWZyYW1lLnNyYyA9IGBkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsJHtwZGZCYXNlNjR9YDtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XHJcbn1cclxuKi9cclxuXHJcbi8qXHJcbiAqIE5vdCB1c2VkLCBhcyBzaG93aW5nIGEgcHJldmlldyBvbmx5IHJlcXVpcmVzIHNob3dpbmcgdGhlIGltYWdlLFxyXG4gKiBhbmQgbm90IG5lY2Vzc2FyaWx5IHJlbmRlcmluZyB0aGUgZmluYWwgUERGXHJcbiAqIFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvd1BkZihwZGZCYXNlNjQsIHNob3dFbCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzLCByZWopID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHBkZkJpbmFyeSA9IGF0b2IocGRmQmFzZTY0KTtcclxuICAgICAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudCh7IGRhdGE6IHBkZkJpbmFyeSB9KTtcclxuICAgICAgY29uc3QgcGRmID0gYXdhaXQgbG9hZGluZ1Rhc2sucHJvbWlzZTtcclxuICAgICAgY29uc3QgcGFnZU51bWJlciA9IDE7XHJcbiAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBwZGYuZ2V0UGFnZShwYWdlTnVtYmVyKTtcclxuXHJcbiAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcGFnZS5nZXRWaWV3cG9ydCh7IHNjYWxlOiAwLjMgfSk7XHJcbiAgICAgIGNvbnN0IHBkZkNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICBzaG93RWwuYXBwZW5kQ2hpbGQocGRmQ2FudmFzKTtcclxuICAgICAgY29uc3QgcGRmQ3R4ID0gcGRmQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgIHBkZkNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoO1xyXG4gICAgICBwZGZDYW52YXMuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0O1xyXG4gICAgICBjb25zdCByZW5kZXJDdHggPSB7XHJcbiAgICAgICAgY2FudmFzQ29udGV4dDogcGRmQ3R4LFxyXG4gICAgICAgIHZpZXdwb3J0LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVuZGVyVGFzayA9IHBhZ2UucmVuZGVyKHJlbmRlckN0eCk7XHJcbiAgICAgIGF3YWl0IHJlbmRlclRhc2sucHJvbWlzZTtcclxuICAgICAgcmV0dXJuIHJlcyh0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoKGVycikge1xyXG4gICAgICByZWooZXJyKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG4qL1xyXG4iLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZm9udHMvMzRjZDc0OGQ3NjBkNjE4YzU0NDAzYTY5MDg2ZTRmOTkub3RmXCI7IiwiaW1wb3J0IHsgYWRkTmFtZVRvQ2FyZCwgaW1nVG9QZGYgfSBmcm9tICcuL2FkZF9uYW1lc190b19jYXJkJztcclxuaW1wb3J0IGRlZmF1bHRGb250IGZyb20gJy4vZm9udHMvTm93QWx0LU1lZGl1bS5vdGYnO1xyXG5cclxub25tZXNzYWdlID0gYXN5bmMgKGUpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBndWVzdENvbmZpZyB9ID0gZS5kYXRhO1xyXG4gICAgY29uc3QgZm9udFBhdGggPSBndWVzdENvbmZpZy5mb250LmJhc2U2NCB8fCBkZWZhdWx0Rm9udDtcclxuICAgIGNvbnN0IGZvbnRGYWNlID0gbmV3IEZvbnRGYWNlKFxyXG4gICAgICBndWVzdENvbmZpZy5mb250LmZhbWlseSxcclxuICAgICAgYHVybCgke2ZvbnRQYXRofSlgLFxyXG4gICAgKTtcclxuICAgIC8vIGFkZCBpdCB0byB0aGUgbGlzdCBvZiBmb250cyBvdXIgd29ya2VyIHN1cHBvcnRzXHJcbiAgICBzZWxmLmZvbnRzLmFkZChmb250RmFjZSk7XHJcbiAgICAvLyBsb2FkIHRoZSBmb250XHJcbiAgICBhd2FpdCBmb250RmFjZS5sb2FkKClcclxuXHJcbiAgICBhd2FpdCBhZGROYW1lc1RvQ2FyZChlLmRhdGEpO1xyXG5cclxuICAgIHBvc3RNZXNzYWdlKHtcclxuICAgICAgdHlwZTogJ2VuZCcsXHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2F0Y2ggKGVycikge1xyXG4gICAgcG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICBlcnJvcjogZXJyLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gYWRkTmFtZXNUb0NhcmQoZGF0YSkge1xyXG4gIGNvbnN0IHtcclxuICAgIGNhbnZhcyxcclxuICAgIGd1ZXN0TGlzdCxcclxuICAgIGNhcmRJbWcsXHJcbiAgICBndWVzdENvbmZpZyxcclxuICB9ID0gZGF0YTtcclxuICBmb3IobGV0IGkgPSAwOyBpIDwgZ3Vlc3RMaXN0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICBjb25zdCBndWVzdCA9IGd1ZXN0TGlzdFtpXTtcclxuICAgIGlmIChndWVzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmFtZVN0ciA9IGAke2d1ZXN0Q29uZmlnLnByZWZpeH0ke2d1ZXN0fSR7Z3Vlc3RDb25maWcuc3VmZml4fWAudG9VcHBlckNhc2UoKTtcclxuICAgIGNvbnN0IG5hbWVTdHJzID0gbmFtZVN0ci5zcGxpdChndWVzdENvbmZpZy5saW5lQnJlYWtDaGFyYWN0ZXIpO1xyXG4gICAgYWRkTmFtZVRvQ2FyZChjYW52YXMsIGNhcmRJbWcsIG5hbWVTdHJzLCBndWVzdENvbmZpZyk7XHJcbiAgICBjb25zdCBwZGZCYXNlNjQgPSBhd2FpdCBpbWdUb1BkZihjYW52YXMpO1xyXG4gICAgcG9zdE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiAncHJvZ3Jlc3MnLFxyXG4gICAgICBjdXJyZW50OiBpKzEsXHJcbiAgICAgIGd1ZXN0LFxyXG4gICAgICBmaW5hbEltZzogY2FudmFzLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpLFxyXG4gICAgICBwZGZCYXNlNjQsXHJcbiAgICAgIGZpbGVuYW1lOiBndWVzdC5yZXBsYWNlKC9cXFcrL2csICdfJykudG9Mb3dlckNhc2UoKSxcclxuICAgIH0pXHJcbiAgICBcclxuICB9O1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuLy8gdGhlIHN0YXJ0dXAgZnVuY3Rpb25cbl9fd2VicGFja19yZXF1aXJlX18ueCA9ICgpID0+IHtcblx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5cdC8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxuXHR2YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFs4NDFdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg1MzYpKSlcblx0X193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcblx0cmV0dXJuIF9fd2VicGFja19leHBvcnRzX187XG59O1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3MgYW5kIHNpYmxpbmcgY2h1bmtzIGZvciB0aGUgZW50cnlwb2ludFxuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcIlwiICsgY2h1bmtJZCArIFwiLlwiICsge1wiNTM2XCI6XCJmZTZlYWM3ZDRlNWYyZjNjZGU0M1wiLFwiODQxXCI6XCI2YTkxMGU1NDk2NTZiM2MxZmJhMlwifVtjaHVua0lkXSArIFwiLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gc2VsZi5sb2NhdGlvbiArIFwiXCI7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgY2h1bmtzXG4vLyBcIjFcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDUzNjogMVxufTtcblxuLy8gaW1wb3J0U2NyaXB0cyBjaHVuayBsb2FkaW5nXG52YXIgaW5zdGFsbENodW5rID0gKGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR3aGlsZShjaHVua0lkcy5sZW5ndGgpXG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzLnBvcCgpXSA9IDE7XG5cdHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xufTtcbl9fd2VicGFja19yZXF1aXJlX18uZi5pID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdC8vIFwiMVwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuXHRpZighaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdGltcG9ydFNjcmlwdHMoX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpKTtcblx0XHR9XG5cdH1cbn07XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5raW52aXRhdGlvbl9jYXJkX2J1bGtfbmFtZV9wcmludFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtpbnZpdGF0aW9uX2NhcmRfYnVsa19uYW1lX3ByaW50XCJdIHx8IFtdO1xudmFyIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uID0gY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSBpbnN0YWxsQ2h1bms7XG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3QiLCIvLyBydW4gc3RhcnR1cFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLngoKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsIm5leHQiLCJhZGROYW1lVG9DYXJkIiwiY2FudmFzIiwiY2FyZEltZyIsIm5hbWVTdHJzIiwiZ3Vlc3RDb25maWciLCJjdHgiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkcmF3SW1hZ2UiLCJmb250IiwiZm9udFN0ciIsIndlaWdodCIsInNpemUiLCJmYW1pbHkiLCJmaWxsU3R5bGUiLCJjb2xvciIsInRleHRCYXNlbGluZSIsInRleHRBbGlnbiIsImkiLCJsZW5ndGgiLCJuYW1lU3RyIiwiZmlsbFRleHQiLCJwb3NpdGlvbiIsInkiLCJhc3luYyIsImltZ1RvUGRmIiwicGRmRG9jIiwiUERGRG9jdW1lbnQiLCJwYWdlIiwiYWRkUGFnZSIsImJsb2IiLCJjb252ZXJ0VG9CbG9iIiwidHlwZSIsImltZ0J1ZmZlciIsImFycmF5QnVmZmVyIiwiZW1iZWRQbmciLCJ4Iiwic2F2ZUFzQmFzZTY0Iiwib25tZXNzYWdlIiwiZSIsImRhdGEiLCJmb250UGF0aCIsImJhc2U2NCIsImZvbnRGYWNlIiwiRm9udEZhY2UiLCJzZWxmIiwiZm9udHMiLCJhZGQiLCJsb2FkIiwiZ3Vlc3RMaXN0IiwiZ3Vlc3QiLCJwcmVmaXgiLCJzdWZmaXgiLCJ0b1VwcGVyQ2FzZSIsInNwbGl0IiwibGluZUJyZWFrQ2hhcmFjdGVyIiwicGRmQmFzZTY0IiwicG9zdE1lc3NhZ2UiLCJjdXJyZW50IiwiZmluYWxJbWciLCJ0cmFuc2ZlclRvSW1hZ2VCaXRtYXAiLCJmaWxlbmFtZSIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImVyciIsImVycm9yIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIl9fd2VicGFja19leHBvcnRzX18iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImYiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsImIiLCJsb2NhdGlvbiIsImluc3RhbGxlZENodW5rcyIsImltcG9ydFNjcmlwdHMiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsInB1c2giLCJiaW5kIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwicG9wIiwidGhlbiJdLCJzb3VyY2VSb290IjoiIn0=